//
//  krw.c
//  Vertex
//
//  Created by Alfie on 24/09/2024.
//

#include "krw.h"

#include <stdint.h>

uint64_t gTask = 0, gProc = 0, gUcred = 0;
struct KernelPrimitives gPrimitives = {0};

uint8_t kread8(uint64_t va) {
  if (gPrimitives.kread8) {
    return gPrimitives.kread8(va);
  } else {
    return 0;
  }
}

uint16_t kread16(uint64_t va) {
  if (gPrimitives.kread16) {
    return gPrimitives.kread16(va);
  } else {
    return 0;
  }
}

uint32_t kread32(uint64_t va) {
  if (gPrimitives.kread32) {
    return gPrimitives.kread32(va);
  } else {
    return 0;
  }
}

uint64_t kread64(uint64_t va) {
  if (gPrimitives.kread64) {
    return gPrimitives.kread64(va);
  } else {
    return 0;
  }
}

void kreadbuf(uint64_t va, void *buf, size_t len) {
  if (gPrimitives.kreadbuf) {
    gPrimitives.kreadbuf(va, buf, len);
  } else {
    return;
  }
}

void kwrite8(uint64_t va, uint8_t val) {
  if (gPrimitives.kwrite8) {
    gPrimitives.kwrite8(va, val);
  }
}

void kwrite16(uint64_t va, uint16_t val) {
  if (gPrimitives.kwrite16) {
    gPrimitives.kwrite16(va, val);
  }
}

void kwrite32(uint64_t va, uint32_t val) {
  if (gPrimitives.kwrite32) {
    gPrimitives.kwrite32(va, val);
  }
}

void kwrite64(uint64_t va, uint64_t val) {
  if (gPrimitives.kwrite64) {
    gPrimitives.kwrite64(va, val);
  }
}

void kwritebuf(uint64_t va, void *buf, size_t len) {
  if (gPrimitives.kwritebuf) {
    gPrimitives.kwritebuf(va, buf, len);
  } else {
    return;
  }
}
